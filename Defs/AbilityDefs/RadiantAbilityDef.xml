<?xml version="1.0" encoding="utf-8"?>
<Defs>
  <AbilityCategoryDef>
    <defName>Radiant</defName>
    <label>Radiant</label>
    <description>Abilities granted to Radiants, powered by their connection to the ancient forces.</description>
  </AbilityCategoryDef>

  <AbilityDef Name="RadiantBase" Abstract="True">
    <abilityClass>StormlightMod.RadiantAbility</abilityClass> <!-- Custom ability class -->
    <category>Radiant</category> <!-- Custom category for Radiant abilities -->
    <statBases>
      <Ability_Duration>0</Ability_Duration> <!-- Base duration -->
    </statBases>
    <warmupSound>PsycastCastLoop</warmupSound> <!-- Custom sound for radiant abilities -->
    <verbProperties>
      <verbClass>StormlightMod.Verb_CastRadiant</verbClass> <!-- Custom verb class -->
      <range>24.9</range>
      <requireLineOfSight>True</requireLineOfSight>
      <warmupTime>1</warmupTime>
      <targetParams>
        <thingCategory>Item</thingCategory>
        <mapObjectTargetsMustBeAutoAttackable>False</mapObjectTargetsMustBeAutoAttackable>
      </targetParams>
    </verbProperties>
  </AbilityDef>


<AbilityDef ParentName="RadiantBase">
    <defName>BreathStormLight</defName>
    <label>Breath Stormlight</label>
    <description>breath stormlight</description>
    <level>1</level>
    <iconPath>Things/Ability/lucid_summon_blade</iconPath> 
    <hotKey>Misc5</hotKey>
    <hostile>false</hostile>
    <casterMustBeCapableOfViolence>false</casterMustBeCapableOfViolence>
    <verbProperties>
        <warmupTime>0.5</warmupTime>
        <range>0</range> 
        <targetParams>
            <canTargetSelf>true</canTargetSelf>
        </targetParams>
    </verbProperties>
    <comps>
        <li Class="StormlightMod.CompProperties_AbilityToggleStormlight">
            <compClass>StormlightMod.CompAbilityEffect_AbilityToggleStormlight</compClass>
        </li>
    </comps>
</AbilityDef>


<AbilityDef ParentName="RadiantBase">
    <defName>SummonShardblade</defName>
    <label>Summon Shardblade</label>
    <description>Summon a powerful Shardblade from the Spiritual Realm into your hand.</description>
    <level>1</level>
    <iconPath>Things/Ability/lucid_summon_blade</iconPath> 
    <hotKey>Misc1</hotKey>
    <hostile>false</hostile>
    <casterMustBeCapableOfViolence>true</casterMustBeCapableOfViolence>
    <verbProperties>
        <warmupTime>0.5</warmupTime>
        <range>0</range> 
        <targetParams>
            <canTargetSelf>true</canTargetSelf>
        </targetParams>
    </verbProperties>
    <comps>
        <li Class="StormlightMod.CompProperties_AbilitySpawnEquipment">
            <compClass>StormlightMod.CompAbilityEffect_SpawnEquipment</compClass>
            <thingDef>MeleeWeapon_Shardblade</thingDef> <!-- Ensure this matches your XML weapon defName -->
        </li>
        <li Class="CompProperties_AbilityFleckOnTarget">
            <fleckDef>PsycastPsychicEffect</fleckDef>
        </li>
    </comps>
</AbilityDef>

<AbilityDef ParentName="RadiantBase">
    <defName>unbondBlade</defName>
    <label>sever bond with Shardblade</label>
    <description>Sever the bond with the blade.</description>
    <level>1</level>
    <iconPath>Things/Apparel/ArmorFront-1</iconPath> 
    <hotKey>Misc2</hotKey>
    <hostile>false</hostile>
    <casterMustBeCapableOfViolence>true</casterMustBeCapableOfViolence>
    

    <verbProperties>
        <warmupTime>0.5</warmupTime>
        <range>0</range> 
        <targetParams>
            <canTargetSelf>true</canTargetSelf>
        </targetParams>
    </verbProperties>

    <comps>
        <li Class="StormlightMod.CompProperties_AbilityBreakBond">
            <compClass>StormlightMod.CompAbilityEffect_BreakBondWithSword</compClass>
            <thingDef>MeleeWeapon_Shardblade</thingDef> <!-- Ensure this matches your XML weapon defName -->
        </li>
    </comps>
</AbilityDef>

<!-- LASHING -->

<ThingDef ParentName="PawnFlyerBase">
  <defName>lucid_lashingUp</defName>
  <label>custom upward flyer</label>
  <thingClass>PawnFlyer</thingClass>
    <pawnFlyer>
      <!-- Use your custom worker if you want (or the default PawnFlyerWorker) -->
      <workerClass>StormlightMod.PawnFlyerWorker_LashUp</workerClass>

      <!-- Minimum flight time (in seconds) -->
      <flightDurationMin>0.5</flightDurationMin>

      <!-- Speed (cells per second) -->
      <flightSpeed>1</flightSpeed>

      <!-- Forward offset factor if you want a 3D effect (set to 0 if not) -->
      <heightFactor>2</heightFactor>

    </pawnFlyer>
</ThingDef>

<AbilityDef ParentName="RadiantBase">
    <defName>lucidLashingUpward</defName>
    <label>lash up</label>
    <description>lash something to fall upwards.</description>
    <level>1</level>
    <iconPath>Things/Ability/lucid_lashing</iconPath> 
    <hotKey>Misc3</hotKey>
    <hostile>false</hostile>
    <casterMustBeCapableOfViolence>true</casterMustBeCapableOfViolence>
    

    <verbProperties>
        <range>2</range>
        <targetParams>
            <canTargetSelf>false</canTargetSelf>
            <canTargetAnimals>true</canTargetAnimals>
            <canTargetPawns>true</canTargetPawns>
            <canTargetItems>true</canTargetItems>
        </targetParams>
    </verbProperties>

    <comps>
        <li Class="StormlightMod.CompProperties_AbilityLashUpward">
            <compClass>StormlightMod.CompAbilityEffect_AbilityLashUpward</compClass>
            <thingDef>lucid_lashingUp</thingDef> <!-- Ensure this matches your XML weapon defName -->
            <stormLightCost>100</stormLightCost>
        </li>
    </comps>
</AbilityDef>



<!-- FLIGHT -->
<ThingDef ParentName="PawnFlyerBase">
  <defName>lucid_WindRunnerFlight</defName>
  <label>custom upward flyer</label>
  <thingClass>PawnFlyer</thingClass>
    <pawnFlyer>
      <!-- Use your custom worker if you want (or the default PawnFlyerWorker) -->
      <workerClass>StormlightMod.PawnFlyerWorker_WindRunnerFlight</workerClass>

      <!-- Minimum flight time (in seconds) -->
      <flightDurationMin>0.5</flightDurationMin>

      <!-- Speed (cells per second) -->
      <flightSpeed>10</flightSpeed>

      <!-- Forward offset factor if you want a 3D effect (set to 0 if not) -->
      <heightFactor>1</heightFactor>

    </pawnFlyer>
</ThingDef>
<AbilityDef ParentName="RadiantBase">
    <defName>lucidWindRunnerFlight</defName>
    <label>Fly to location</label>
    <description>windrunner flight.</description>
    <level>1</level>
    <iconPath>Things/Ability/lucid_flight</iconPath> 
    <hotKey>Misc4</hotKey>
    <hostile>false</hostile>
    <casterMustBeCapableOfViolence>false</casterMustBeCapableOfViolence>

    <verbProperties>
        <range>-1</range>
        <targetParams>
            <canTargetSelf>false</canTargetSelf>
            <canTargetLocations>true</canTargetLocations>
            <canTargetPawns>true</canTargetPawns>
            <canTargetItems>false</canTargetItems>
        </targetParams>
    </verbProperties>

    <comps>
        <li Class="StormlightMod.CompProperties_AbilityWindRunnerFlight">
            <compClass>StormlightMod.CompAbilityEffect_AbilityWindRunnerFlight</compClass>
            <thingDef>lucid_WindRunnerFlight</thingDef> <!-- Ensure this matches your XML weapon defName -->
            <stormLightCost>100</stormLightCost>
        </li>
    </comps>
</AbilityDef>
</Defs>
